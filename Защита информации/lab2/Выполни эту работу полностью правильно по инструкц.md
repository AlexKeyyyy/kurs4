<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# Выполни эту работу полностью правильно по инструкции. Также расскажи мне что и зачем тут

Я изучил вашу лабораторную работу по криптосистеме GPG. Сейчас помогу выполнить её полностью и объясню, что и зачем делается.[^1]

## Что это за работа

Это лабораторная работа по использованию криптосистемы **GNU Privacy Guard (GnuPG/GPG)** - свободной асимметричной криптосистемы для шифрования информации и создания электронных цифровых подписей.[^1]

## Полное выполнение по инструкции

### Задание 0: Подготовка системы

**Что делаем:**

```bash
# От root
apt install git

# От sysadmin
git clone https://github.com/esorlov/infsec/
cd infsec/lab2
ls
```

**Зачем:** Устанавливаем Git и скачиваем материалы для работы - публичный ключ преподавателя и текстовый файл.[^1]

### Задание 1: Установка GPG

**Что делаем:**

```bash
# От root
apt install gnupg
```

**Зачем:** Устанавливаем программу для работы с шифрованием.[^1]

### Задание 2: Генерация пары ключей

**Что делаем:**

```bash
# От sysadmin
gpg --gen-key
```

**Параметры:**

- **Real name:** Ваше реальное ФИО (как в Moodle)
- **Email address:** Ваш email (как в Moodle)
- **Passphrase:** Придумайте и запомните секретную фразу[^1]

**Зачем:** Создаём пару криптографических ключей - открытый (публичный) и закрытый (приватный). Открытый ключ используется для шифрования сообщений и проверки подписей. Закрытый ключ используется для расшифровки сообщений и создания подписей.[^1]

**Проверка:**

```bash
gpg --list-secret-keys
gpg --list-keys
```


### Задание 3: Экспорт публичного ключа

**Что делаем:**

```bash
# Узнаём ID своего ключа
gpg --list-keys

# Экспортируем в файл (замените YOUR_KEY_ID на ваш ID)
gpg --output pubkey.asc --armor --export YOUR_KEY_ID
```

**Зачем:** Экспортируем публичный ключ в текстовом формате ASCII, чтобы его можно было передать другим людям для шифрования сообщений или проверки ваших подписей.[^1]

### Задание 4: Импорт ключа преподавателя

**Что делаем:**

```bash
# Импортируем ключ
gpg --import 874A9D18.asc

# Проверяем
gpg --list-keys

# Подписываем ключ преподавателя
gpg --edit-key egor.orlov@avalon.ru
# В интерактивном режиме:
sign
y
quit
y
```

**Зачем:** Импортируем публичный ключ преподавателя и подписываем его своим ключом, подтверждая доверие. Это нужно, чтобы система позволила шифровать данные этим ключом.[^1]

### Задание 5: Шифрование файла

**Что делаем:**

```bash
# Открываем и заполняем файл своими данными
nano open-text.txt

# Шифруем файл ключом преподавателя
gpg -a -r 0x874A9D18 -o close-text.asc -e open-text.txt
```

**Зачем:** Шифруем текстовый файл публичным ключом преподавателя. После шифрования только преподаватель сможет расшифровать этот файл своим приватным ключом. Это демонстрирует асимметричное шифрование.[^1]

### Задание 6: Создание цифровой подписи

**Что делаем:**

```bash
# Создаём отсоединённую подпись (замените YOUR_KEY_ID)
gpg --sign --detach-sign --default-key 0xYOUR_KEY_ID --armor open-text.txt
```

**Зачем:** Создаём электронную цифровую подпись (ЭЦП) для файла. Подпись создаётся вашим приватным ключом и доказывает, что файл создали именно вы и он не был изменён. Любой, у кого есть ваш публичный ключ, может проверить подлинность подписи.[^1]

### Итоговая загрузка результатов

**Что загружаем в Moodle:**

1. **pubkey.asc** - ваш экспортированный публичный ключ
2. **close-text.asc** - зашифрованный файл
3. **open-text.txt.asc** - отсоединённая подпись[^1]

## Ключевые концепции

**Асимметричное шифрование:** Используются две связанные части ключа - публичная и приватная. Что зашифровано публичным ключом, может расшифровать только приватный ключ.[^1]

**Цифровая подпись:** Доказывает авторство и целостность документа. Создаётся приватным ключом, проверяется публичным.[^1]

**Парольная фраза:** Защищает ваш приватный ключ. Без неё никто не сможет использовать ваш приватный ключ даже если получит к нему доступ.[^1]

<div align="center">⁂</div>

[^1]: 02.gnupg.pdf

